# Windows版 セットアップ動作確認テスト一覧

本ドキュメントは、Swine Monitor Windows版をセットアップした後に実施する動作確認テストの一覧です。

---

## 📋 テスト前の準備

| 項目 | 確認事項 |
|------|----------|
| □ | `SwineMonitor.exe` が `dist\SwineMonitor\` に存在する |
| □ | `config.yaml` が設定済み |
| □ | `.env` が設定済み |
| □ | YOLOモデル (`models\yolo11s_best.pt`) が配置済み |
| □ | IPカメラが接続可能な状態 |

---

## 🧪 テスト一覧

### 1. 起動テスト

| # | テスト項目 | 手順 | 期待結果 | 結果 |
|---|-----------|------|----------|------|
| 1.1 | 初回起動 | `SwineMonitor.exe` をダブルクリック | セットアップウィザードが表示される | □ |
| 1.2 | 2回目以降の起動 | `SwineMonitor.exe` をダブルクリック | ログイン画面が表示される | □ |
| 1.3 | エラー時の起動 | `.env` を削除して起動 | エラーメッセージが表示される | □ |

---

### 2. セットアップウィザードテスト

| # | テスト項目 | 手順 | 期待結果 | 結果 |
|---|-----------|------|----------|------|
| 2.1 | カメラURL入力 | RTSP URLを入力 | 次のステップに進める | □ |
| 2.2 | カメラ接続テスト | 「接続テスト」ボタンをクリック | 接続成功/失敗が表示される | □ |
| 2.3 | Email設定 | SMTP情報を入力 | 次のステップに進める | □ |
| 2.4 | Email接続テスト | 「テスト送信」ボタンをクリック | **実際にテストメールが届く** | □ |
| 2.5 | Discord設定 | Webhook URLを入力 | 次のステップに進める | □ |
| 2.6 | Discord未設定 | URLを空のまま次へ | 警告が表示されるがスキップ可能 | □ |
| 2.7 | パスワード設定 | パスワードを入力して完了 | ログイン画面に遷移 | □ |

---

### 3. ログインテスト

| # | テスト項目 | 手順 | 期待結果 | 結果 |
|---|-----------|------|----------|------|
| 3.1 | 正しいパスワード | 設定したパスワードを入力 | メイン画面が表示される | □ |
| 3.2 | 間違ったパスワード | 間違ったパスワードを入力 | エラーメッセージが表示される | □ |
| 3.3 | 空のパスワード | 何も入力せずにログイン | エラーメッセージが表示される | □ |

---

### 4. メイン画面テスト

| # | テスト項目 | 手順 | 期待結果 | 結果 |
|---|-----------|------|----------|------|
| 4.1 | 画面表示 | ログイン後 | 豚舎選択、開始ボタンが表示される | □ |
| 4.2 | 豚舎選択 | ドロップダウンで豚舎を選択 | 選択が反映される | □ |
| 4.3 | 監視開始 | 「開始」ボタンをクリック | カメラ映像が表示される | □ |
| 4.4 | 監視停止 | 「停止」ボタンをクリック | 映像が停止する | □ |
| 4.5 | 履歴ボタン | 「履歴」ボタンをクリック | 履歴画面が開く | □ |
| 4.6 | 設定ボタン | 「設定」ボタンをクリック | 設定画面が開く | □ |

---

### 5. 検出テスト

| # | テスト項目 | 手順 | 期待結果 | 結果 |
|---|-----------|------|----------|------|
| 5.1 | 検出時の画像保存 | マウンティング動作を検出させる | `data\images\` に画像が保存される | □ |
| 5.2 | 検出時のDB記録 | 検出後、履歴画面を開く | 検出ログが表示される | □ |
| 5.3 | 即時通知（Email） | 検出発生 | 設定したメールアドレスに通知が届く | □ |
| 5.4 | 即時通知（Discord） | 検出発生 | Discordに通知が届く | □ |

---

### 6. 設定画面テスト

| # | テスト項目 | 手順 | 期待結果 | 結果 |
|---|-----------|------|----------|------|
| 6.1 | カメラ設定変更 | カメラURLを変更して保存 | 新しいURLで接続される | □ |
| 6.2 | 通知設定変更 | 即時/日次サマリーを切り替え | 設定が保存される | □ |
| 6.3 | パスワード変更 | 新しいパスワードを設定 | 次回ログインで新パスワードが使える | □ |

---

### 7. 通知テスト

| # | テスト項目 | 手順 | 期待結果 | 結果 |
|---|-----------|------|----------|------|
| 7.1 | Emailテスト送信 | 設定画面で「テスト送信」クリック | **実際にメールが届く** | □ |
| 7.2 | Email認証エラー | 間違ったパスワードでテスト | 認証エラーが表示される | □ |
| 7.3 | Discordテスト送信 | 設定画面で「テスト送信」クリック | **実際にDiscordに投稿される** | □ |
| 7.4 | Discord未設定エラー | WebhookURL空でテスト | 「Discord not configured」エラー表示 | □ |

---

### 8. 履歴画面テスト

| # | テスト項目 | 手順 | 期待結果 | 結果 |
|---|-----------|------|----------|------|
| 8.1 | 一覧表示 | 履歴画面を開く | 検出ログが時系列で表示される | □ |
| 8.2 | 日付フィルタ | カレンダーで日付を選択 | 選択した日のログのみ表示される | □ |
| 8.3 | 豚舎フィルタ | 豚舎を選択 | 選択した豚舎のログのみ表示される | □ |
| 8.4 | 画像プレビュー | ログをクリック | 検出画像がプレビュー表示される | □ |

---

### 9. 終了テスト

| # | テスト項目 | 手順 | 期待結果 | 結果 |
|---|-----------|------|----------|------|
| 9.1 | 正常終了 | ウィンドウの×ボタンをクリック | アプリが正常に終了する | □ |
| 9.2 | 監視中の終了 | 監視中に×ボタンをクリック | 確認ダイアログが表示される | □ |

---

### 10. 異常系テスト

| # | テスト項目 | 手順 | 期待結果 | 結果 |
|---|-----------|------|----------|------|
| 10.1 | カメラ切断 | 監視中にカメラのLANケーブルを抜く | 再接続を試みる/エラー表示 | □ |
| 10.2 | モデル不在 | `models\` からモデルを移動して起動 | エラーメッセージが表示される | □ |
| 10.3 | DB書き込みエラー | `data\` を読み取り専用にして検出 | エラーがログに記録される | □ |

---

## 📝 テスト結果記録

| 項目 | 内容 |
|------|------|
| テスト実施日 | |
| テスト実施者 | |
| バージョン | |
| OS | Windows 10 / 11 |
| 合格テスト数 | / 35 |
| 不合格テスト数 | |
| 備考 | |

---

## ⚠️ 既知の問題

現時点での既知の問題があればここに記載：

1. なし

---

## 📧 問い合わせ先

テストで問題が発生した場合は、BIRC チームに連絡してください。
